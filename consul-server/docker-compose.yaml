---
services:
  consul:
    image: hashicorp/consul:1.20
    container_name: consul
    restart: unless-stopped
    network_mode: host
    volumes:
      - consul-data:/consul/data
      - ./consul.d:/consul/config:ro
    command: agent -server -bootstrap-expect=1 -ui -config-dir=/consul/config
    environment:
      CONSUL_BIND_INTERFACE: eth0

volumes:
  consul-data:
